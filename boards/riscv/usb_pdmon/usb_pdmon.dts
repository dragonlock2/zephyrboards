/dts-v1/;

#include <wch/wch_ch32x035.dtsi>
#include <dt-bindings/gpio/gpio.h>
#include <zephyrboards/dt-bindings/pinctrl/ch32x035-pinctrl.h>

/ {
    model = "usb_pdmon";
    compatible = "wch,ch32x035";

    chosen {
        zephyr,sram = &sram0;
        zephyr,flash = &flash0;
        zephyr,console = &usart1;
    };

    aliases {
        led0 = &led_r;
        led1 = &led_g;
        led2 = &led_b;
    };

    leds {
        compatible = "gpio-leds";
        led_r:   led_r   { gpios = <&gpioa 7 GPIO_ACTIVE_LOW>; };
        led_g:   led_g   { gpios = <&gpiob 3 GPIO_ACTIVE_LOW>; };
        led_b:   led_b   { gpios = <&gpiob 0 GPIO_ACTIVE_LOW>; };
        vbus_en: vbus_en { gpios = <&gpioc 3 0>;               };
    };
};

&usart1 {
    pinctrl = <PB10 PB11>;
    remap = <GPIO_PartialRemap2_USART1>;
    current-speed = <115200>;
    status = "okay";
};

&usart2 {
    pinctrl = <PA2 PA3>;
    current-speed = <19200>;
    status = "okay";
    lin0: lin0 {
        compatible = "virtual,lin-uart";
        status = "okay";
        bitrate = <19200>;
        max-wait-percent = <200>;
    };
};

&gpioa {
    status = "okay";
};

&gpiob {
    status = "okay";
};

&gpioc {
    status = "okay";
};
